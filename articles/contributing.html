<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Contributing • sixtyfour</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Contributing">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sixtyfour</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/sixtyfour.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/auth.html">Managing AWS Auth</a></li>
    <li><a class="dropdown-item" href="../articles/billing.html">Explore Billing Data</a></li>
    <li><a class="dropdown-item" href="../articles/contributing.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/databases.html">Databases</a></li>
    <li><a class="dropdown-item" href="../articles/s3.html">S3</a></li>
    <li><a class="dropdown-item" href="../articles/s3iam.html">Managing buckets in a small group of users</a></li>
    <li><a class="dropdown-item" href="../articles/six.html">High level six functions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/getwilds/sixtyfour/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Contributing</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/getwilds/sixtyfour/blob/main/vignettes/contributing.Rmd" class="external-link"><code>vignettes/contributing.Rmd</code></a></small>
      <div class="d-none name"><code>contributing.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="general-guidelines">General guidelines<a class="anchor" aria-label="anchor" href="#general-guidelines"></a>
</h2>
<p>This article outlines how to propose a change to
<code>sixtyfour</code>. For more information about contributing to this,
and other WILDS projects, please see the <a href="https://getwilds.org/guide/" class="external-link"><strong>WILDS Contributing
Guide</strong></a>.</p>
<div class="section level3">
<h3 id="fixing-typosdocs-changes">Fixing typos/docs changes<a class="anchor" aria-label="anchor" href="#fixing-typosdocs-changes"></a>
</h3>
<p>You can fix typos, spelling mistakes, or grammatical errors in the
documentation directly using the GitHub web interface, as long as the
changes are made in the <em>source</em> file.</p>
</div>
<div class="section level3">
<h3 id="bigger-changes">Bigger changes<a class="anchor" aria-label="anchor" href="#bigger-changes"></a>
</h3>
<p>If you want to make a bigger change, it’s a good idea to first file
an issue and make sure someone from the team agrees that it’s
needed.</p>
<p>If you’ve found a bug, please file an issue that illustrates the bug
with a minimal reproducible example using <a href="https://www.tidyverse.org/help/#reprex" class="external-link">reprex</a>.</p>
<p>Note that this package has a <code>Makefile</code> in the root of the
repository - see the targets in the <code>Makefile</code> for various
package maintenance tasks.</p>
</div>
<div class="section level3">
<h3 id="git-flow">Git Flow<a class="anchor" aria-label="anchor" href="#git-flow"></a>
</h3>
<p>This package follows <a href="https://nvie.com/posts/a-successful-git-branching-model/" class="external-link">Git
Flow</a>. In brief, there’s two main branches: <code>main</code> and
<code>dev</code>. <code>main</code> is considered to be more or less
“production-ready” and at any given time should be associated with the
most recent release. The <code>dev</code> branch has the most recent
state of the in development code for the package. When <code>dev</code>
reaches a state where we’re ready for a release, we’ll merge
<code>dev</code> back to <code>main</code> and cut a release. When you
make a feature branch, please branch off of <code>dev</code>.</p>
<div class="section level4">
<h4 id="pull-request-process">Pull request process<a class="anchor" aria-label="anchor" href="#pull-request-process"></a>
</h4>
<ul>
<li>Fork the package and clone onto your computer</li>
<li>Checkout the <code>dev</code> branch</li>
<li>Create a Git branch off of <code>dev</code> for your pull request
(PR)</li>
<li>Make your changes, commit to git, and then create a pull request
against <code>dev</code>.
<ul>
<li>The title of your PR should briefly describe the change.</li>
<li>The body of your PR should contain
<code>Fixes #issue-number</code>.</li>
</ul>
</li>
<li>For user-facing changes, add a bullet to the <code>NEWS.md</code>
file.</li>
</ul>
</div>
<div class="section level4">
<h4 id="code-style">Code style<a class="anchor" aria-label="anchor" href="#code-style"></a>
</h4>
<ul>
<li>New/edited code should follow the <a href="https://getwilds.org/guide/style.html" class="external-link">WILDS style guide</a>.</li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a>
</h2>
<p>We strive to have all tests that do HTTP requests do so against
resources that are not actual AWS accounts given the drawbacks with
using real accounts, e.g., setting them up can be difficult at some
organizations; forgotten resources can be expensive; accidentally making
unwated changes to an account, etc.</p>
<p>We use two tools to replace real AWS accounts: Minio, Localstack.</p>
<div class="section level3">
<h3 id="minio">Minio<a class="anchor" aria-label="anchor" href="#minio"></a>
</h3>
<p>We use <a href="https://min.io/" class="external-link">Minio</a> for testing two sets of
functions in this package for interacting with S3:</p>
<ul>
<li>tests in <code>test-buckets.R</code>
</li>
<li>tests in <code>test-files.R</code>
</li>
</ul>
<div class="section level4">
<h4 id="local">Local<a class="anchor" aria-label="anchor" href="#local"></a>
</h4>
<p><code>sixtyfour</code> tests that use Minio will just be skipped if
you don’t have Minio running.</p>
<p>To use Minio, first install it for your platform: <a href="https://min.io/docs/minio/macos/index.html" class="external-link">MacOS</a>, <a href="https://min.io/docs/minio/windows/index.html" class="external-link">Windows</a>, <a href="https://min.io/docs/minio/linux/index.html" class="external-link">Linux</a>.</p>
<p>Next, start Minio. Within this package is a make target
<code>minio_start</code> for starting Minio locally; it should only work
on Linux and MacOS platforms.</p>
<p>Upon starting Minio it will display URLs for both the Minio API and
WebUI - and your username/password to login to the WebUI. You can open
up the WebUI as a nice visual dashboard of what’s going on.</p>
</div>
<div class="section level4">
<h4 id="github-actions">GitHub Actions<a class="anchor" aria-label="anchor" href="#github-actions"></a>
</h4>
<p>The <code>R-CMD-check</code> workflow in
<code>.github/workflows/</code> includes spinning up Minio for running
unit tests - but only on Linux; tests that require Minio are skipped on
MacOS and WIndows platforms on GitHub Actions.</p>
</div>
<div class="section level4">
<h4 id="minio-details">Minio Details<a class="anchor" aria-label="anchor" href="#minio-details"></a>
</h4>
<p>The following information (collapsed) is for those who want to know
more about the minio setup, and may want to tweak it or add minio setup
to other tests.</p>
<details><summary>
Expand for details
</summary><ul>
<li>
<code>tests/testthat/helper-minio.R</code> has helper functions for
Minio. <code>bucket_delete</code> and <code>buckets_empty</code> make it
easier to do cleanup in tests. The <code>minio_available</code> function
is to be used inside <code>skip_if_not</code> to skip the tests in the
file if Minio is not available, like:
<code>skip_if_not(minio_available(), "Minio Not Available")</code>
</li>
<li>At the top of any file that uses Minio, setup the interfaces to
Minio like:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>AWS_PROFILE <span class="op">=</span> <span class="st">"minio"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>And unset at the bottom of the file to cleanup:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.unsetenv</a></span><span class="op">(</span><span class="st">"AWS_PROFILE"</span><span class="op">)</span></span></code></pre></div>
<p>Internally we grab client objects for <code>paws</code> and
<code>s3fs</code> as needed and use <code>AWS_PROFILE</code> env var to
toggle on/off using Minio.</p>
<p>For Minio we use the default credentials:</p>
<ul>
<li>Access key id: <code>minioadmin</code> (override with env var
<code>MINIO_USER</code>)</li>
<li>Secret access key: <code>minioadmin</code> (override with env var
<code>MINIO_PWD</code>)</li>
<li>Endpoint: <code>http://127.0.0.1:9000</code> (override with env var
<code>MINIO_ENDPOINT</code>)</li>
</ul>
<p>You can override these defaults by setting the env vars above to your
own values.</p>
</details>
</div>
</div>
<div class="section level3">
<h3 id="localstack">Localstack<a class="anchor" aria-label="anchor" href="#localstack"></a>
</h3>
<p>We use <a href="https://www.localstack.cloud/" class="external-link">Localstack</a> for
testing some functions in this package:</p>
<ul>
<li>tests in <code>test-groups.R</code>
</li>
<li>tests in <code>test-policies.R</code>
</li>
<li>tests in <code>test-roles.R</code>
</li>
<li>tests in <code>test-s3.R</code>
</li>
<li>tests in <code>test-secrets_manager.R</code>
</li>
<li>tests in <code>test-users.R</code>
</li>
<li>tests in <code>test-vpc.R</code>
</li>
</ul>
<div class="section level4">
<h4 id="local-1">Local<a class="anchor" aria-label="anchor" href="#local-1"></a>
</h4>
<p><code>sixtyfour</code> tests that use Localstack will just be skipped
if you don’t have Localstack running.</p>
<p>To use Localstack, first install it for your platform <a href="https://docs.localstack.cloud/getting-started/installation/" class="external-link uri">https://docs.localstack.cloud/getting-started/installation/</a>.</p>
<p>Next, start Localstack. Within this package is a make target
<code>localstack_start</code> for starting Localstack locally. That make
target should only work on Linux and MacOS platforms.</p>
<p>For a GUI interface to the locally running localstack you can install
the Desktop client - which isn’t very good - at <a href="https://docs.localstack.cloud/getting-started/installation/#localstack-desktop" class="external-link uri">https://docs.localstack.cloud/getting-started/installation/#localstack-desktop</a>.
Better yet, login to the cloud Localstack site and you can interface
with your locally running Localstack in the better interface there.
Login at <a href="https://app.localstack.cloud/" class="external-link uri">https://app.localstack.cloud/</a>.</p>
</div>
<div class="section level4">
<h4 id="github-actions-1">GitHub Actions<a class="anchor" aria-label="anchor" href="#github-actions-1"></a>
</h4>
<p>The <code>R-CMD-check</code> workflow in
<code>.github/workflows/</code> includes spinning up Localstack for
running unit tests - but only on Linux; tests that require Localstack
are skipped on MacOS and WIndows platforms on GitHub Actions.</p>
</div>
<div class="section level4">
<h4 id="localstack-details">Localstack Details<a class="anchor" aria-label="anchor" href="#localstack-details"></a>
</h4>
<p>The following (collapsed) bullets list information for those who want
to know more about the Localstack setup, and that may want to tweak it
or add Localstack setup to other tests.</p>
<details><summary>
Expand for details
</summary><ul>
<li>
<code>tests/testthat/helper-localstack.R</code> has helper functions
for Localstack. The <code>localstack_available</code> function is to be
used inside <code>skip_if_not</code> to skip the tests in the file if
Localstack is not available, like:
<code>skip_if_not(localstack_available(), "Localstack Not Available")</code>
</li>
<li>At the top of any file that uses Localstack, setup the interfaces to
Localstack like:</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>AWS_PROFILE <span class="op">=</span> <span class="st">"localstack"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>And unset at the bottom of the file to cleanup:</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.unsetenv</a></span><span class="op">(</span><span class="st">"AWS_PROFILE"</span><span class="op">)</span></span></code></pre></div>
<p>Internally we grab client objects for <code>paws</code> and
<code>s3fs</code> as needed and use <code>AWS_PROFILE</code> env var to
toggle on/off using Localstack.</p>
<p>For Localstack we use the default credentials:</p>
<ul>
<li>Access key id: <code>NOTAREALKEY</code> (override with env var
<code>LOCALSTACK_KEY</code>)</li>
<li>Secret access key: <code>AREALLYFAKETOKEN</code> (override with env
var <code>LOCALSTACK_SECRET</code>)</li>
<li>Endpoint: <code>http://localhost.localstack.cloud:4566</code>
(override with env var <code>LOCALSTACK_ENDPOINT</code>)</li>
</ul>
<p>You can override these defaults by setting the env vars above to your
own values.</p>
</details>
</div>
</div>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that this project is released with a <a href="https://getwilds.org/sixtyfour/CODE_OF_CONDUCT.html">Contributor
Code of Conduct</a>. By contributing to this project you agree to abide
by its terms.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sean Kross, Scott Chamberlain, Fred Hutchinson Cancer Center.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
