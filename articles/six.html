<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>High level six functions • sixtyfour</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="High level six functions">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sixtyfour</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/sixtyfour.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/auth.html">Managing AWS Auth</a></li>
    <li><a class="dropdown-item" href="../articles/billing.html">Explore Billing Data</a></li>
    <li><a class="dropdown-item" href="../articles/contributing.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/databases.html">Databases</a></li>
    <li><a class="dropdown-item" href="../articles/s3.html">S3</a></li>
    <li><a class="dropdown-item" href="../articles/s3iam.html">Managing buckets in a small group of users</a></li>
    <li><a class="dropdown-item" href="../articles/six.html">High level six functions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/getwilds/sixtyfour/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>High level six functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/getwilds/sixtyfour/blob/main/vignettes/six.Rmd" class="external-link"><code>vignettes/six.Rmd</code></a></small>
      <div class="d-none name"><code>six.Rmd</code></div>
    </div>

    
    
<p>High level <code>sixtyfour</code> functions - or “magical” methods -
or we can call them “six methods” after the package name
<code>sixtyfour</code> - are higher level functions to make your life
easier.</p>
<p>It can perhaps best be understood by way of an example.</p>
<p>The function <code><a href="../reference/aws_user_create.html">aws_user_create()</a></code> creates a new user.
However, there’s some basic housekeeping that needs to be done for a new
user to be truly useable. First, the just created user can’t get
information on herself. Second, the user has no credentials by default
for accessing AWS programatically.</p>
<p>To create a smoother user experience <code><a href="../reference/six_user_create.html">six_user_create()</a></code>
creates a new user, including a) creating the appropriate policies if
they don’t exist yet, b) attaching the policies to the created user, and
c) creating an AWS Access Key for the user (and copy an email template
to your clipboard with the details the new user needs).</p>
<div class="section level2">
<h2 id="load-sixtyfour">Load sixtyfour<a class="anchor" aria-label="anchor" href="#load-sixtyfour"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/getwilds/sixtyfour" class="external-link">sixtyfour</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fs.r-lib.org" class="external-link">fs</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="all-the-magical-methods">All the magical methods<a class="anchor" aria-label="anchor" href="#all-the-magical-methods"></a>
</h2>
<p>Here are all the magical methods:</p>
<pre><code><span><span class="co">#&gt;  - six_admin_setup</span></span>
<span><span class="co">#&gt;  - six_bucket_add_user</span></span>
<span><span class="co">#&gt;  - six_bucket_change_user</span></span>
<span><span class="co">#&gt;  - six_bucket_delete</span></span>
<span><span class="co">#&gt;  - six_bucket_permissions</span></span>
<span><span class="co">#&gt;  - six_bucket_remove_user</span></span>
<span><span class="co">#&gt;  - six_bucket_upload</span></span>
<span><span class="co">#&gt;  - six_file_upload</span></span>
<span><span class="co">#&gt;  - six_group_delete</span></span>
<span><span class="co">#&gt;  - six_user_create</span></span>
<span><span class="co">#&gt;  - six_user_creds</span></span>
<span><span class="co">#&gt;  - six_user_delete</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="notes-about-magical-methods">Notes about magical methods<a class="anchor" aria-label="anchor" href="#notes-about-magical-methods"></a>
</h2>
<p>All of these methods have a <code>force</code> parameter that accepts
<code>TRUE</code> or <code>FALSE</code>. The default is
<code>FALSE</code> in which case you are given a prompt in your R
session asking you to confirm that you really do want to create a bucket
of a particular name. Sometimes you supply the bucket name, while other
magic methods figure out a bucket name from an S3 file path (e.g.,
<code>s3://bucketname/some/file.csv</code>). Because we want this
vignette to compile without human interaction, we’re using
<code>force=TRUE</code>, so you won’t see the prompots that you’ll see
when you use these functions interactively.</p>
</div>
<div class="section level2">
<h2 id="s3-magical-methods">S3 magical methods<a class="anchor" aria-label="anchor" href="#s3-magical-methods"></a>
</h2>
<p>Make a random bucket name</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bucket1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/random_string.html">random_bucket</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="upload-to-a-bucket">Upload to a bucket<a class="anchor" aria-label="anchor" href="#upload-to-a-bucket"></a>
</h3>
<p>A file</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo_rds_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Meta/demo.rds"</span><span class="op">)</span></span></code></pre></div>
<p>A directory with files</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="fu"><a href="https://fs.r-lib.org/reference/file_temp.html" class="external-link">path_temp</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"mytmp"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">dir_create</a></span><span class="op">(</span><span class="va">tdir</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span>, \<span class="op">(</span><span class="va">l</span><span class="op">)</span> <span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">file_create</a></span><span class="op">(</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">tdir</span>, <span class="va">l</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="va">tdir</span><span class="op">)</span></span>
<span><span class="co">#&gt; /var/folders/qt/fzq1m_bj2yb_7b2jz57s9q7c0000gp/T/RtmpILqIPZ/mytmp</span></span>
<span><span class="co">#&gt; ├── a</span></span>
<span><span class="co">#&gt; ├── b</span></span>
<span><span class="co">#&gt; ├── c</span></span>
<span><span class="co">#&gt; ├── d</span></span>
<span><span class="co">#&gt; ├── e</span></span>
<span><span class="co">#&gt; ├── f</span></span>
<span><span class="co">#&gt; ├── g</span></span>
<span><span class="co">#&gt; ├── h</span></span>
<span><span class="co">#&gt; ├── i</span></span>
<span><span class="co">#&gt; ├── j</span></span>
<span><span class="co">#&gt; ├── k</span></span>
<span><span class="co">#&gt; ├── l</span></span>
<span><span class="co">#&gt; └── m</span></span></code></pre></div>
<p>Upload both the file and the directory of files to
<code>bucket1</code>: bucket-yiqxfbrczesdmuwo</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/six_bucket_upload.html">six_bucket_upload</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">demo_rds_file</span>, <span class="va">tdir</span><span class="op">)</span>, remote <span class="op">=</span> <span class="va">bucket1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;  [1] "s3://bucket-yiqxfbrczesdmuwo/demo.rds"</span></span>
<span><span class="co">#&gt;  [2] "s3://bucket-yiqxfbrczesdmuwo/mytmp/a"</span></span>
<span><span class="co">#&gt;  [3] "s3://bucket-yiqxfbrczesdmuwo/mytmp/b"</span></span>
<span><span class="co">#&gt;  [4] "s3://bucket-yiqxfbrczesdmuwo/mytmp/c"</span></span>
<span><span class="co">#&gt;  [5] "s3://bucket-yiqxfbrczesdmuwo/mytmp/d"</span></span>
<span><span class="co">#&gt;  [6] "s3://bucket-yiqxfbrczesdmuwo/mytmp/e"</span></span>
<span><span class="co">#&gt;  [7] "s3://bucket-yiqxfbrczesdmuwo/mytmp/f"</span></span>
<span><span class="co">#&gt;  [8] "s3://bucket-yiqxfbrczesdmuwo/mytmp/g"</span></span>
<span><span class="co">#&gt;  [9] "s3://bucket-yiqxfbrczesdmuwo/mytmp/h"</span></span>
<span><span class="co">#&gt; [10] "s3://bucket-yiqxfbrczesdmuwo/mytmp/i"</span></span>
<span><span class="co">#&gt; [11] "s3://bucket-yiqxfbrczesdmuwo/mytmp/j"</span></span>
<span><span class="co">#&gt; [12] "s3://bucket-yiqxfbrczesdmuwo/mytmp/k"</span></span>
<span><span class="co">#&gt; [13] "s3://bucket-yiqxfbrczesdmuwo/mytmp/l"</span></span>
<span><span class="co">#&gt; [14] "s3://bucket-yiqxfbrczesdmuwo/mytmp/m"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="file-upload">File upload<a class="anchor" aria-label="anchor" href="#file-upload"></a>
</h3>
<p>Now that we have a bucket, we can upload a file to the existing
bucket with <code>six_file_upload</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">links_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Meta/links.rds"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/six_file_upload.html">six_file_upload</a></span><span class="op">(</span><span class="va">links_file</span>, <span class="va">bucket1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] "s3://bucket-yiqxfbrczesdmuwo/links.rds"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="add-a-user-to-a-bucket">Add a user to a bucket<a class="anchor" aria-label="anchor" href="#add-a-user-to-a-bucket"></a>
</h3>
<p>Now that we created a bucket, and added some files, let’s add a user
to this bucket.</p>
<p>Create a random user name and create the user in AWS.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">user1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/random_string.html">random_user</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/aws_user_create.html">aws_user_create</a></span><span class="op">(</span><span class="va">user1</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 6</span></span>
<span><span class="co">#&gt;   UserName         UserId    Path  Arn   CreateDate          PasswordLastUsed</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;dttm&gt;              &lt;dttm&gt;</span></span>
<span><span class="co">#&gt; 1 CandiedMeasureme AIDA22PL… /     ***** 2025-03-12 22:41:35 NA</span></span></code></pre></div>
<p>Now add the user to the bucket so they can access it with the
permissions we’re assigning to them.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/six_bucket_add_user.html">six_bucket_add_user</a></span><span class="op">(</span></span>
<span>  bucket <span class="op">=</span> <span class="va">bucket1</span>,</span>
<span>  username <span class="op">=</span> <span class="va">user1</span>,</span>
<span>  permissions <span class="op">=</span> <span class="st">"read"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ CandiedMeasureme now has read access to bucket bucket-yiqxfbrczesdmuwo</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="get-all-user-permissions-for-a-bucket">Get all user permissions for a bucket<a class="anchor" aria-label="anchor" href="#get-all-user-permissions-for-a-bucket"></a>
</h3>
<p>You’ll often want to get a summary of the permissions on a given
bucket. <code><a href="../reference/six_bucket_permissions.html">six_bucket_permissions()</a></code> gives you that
summary.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/six_bucket_permissions.html">six_bucket_permissions</a></span><span class="op">(</span><span class="va">bucket1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span><span class="co">#&gt;   user             permissions policy_read                          policy_admin</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt;       &lt;chr&gt;                                &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 CandiedMeasureme read        S3ReadOnlyAccessBucketyiqxfbrczesdm… &lt;NA&gt;</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="change-a-users-permissions-for-a-bucket">Change a user’s permissions for a bucket<a class="anchor" aria-label="anchor" href="#change-a-users-permissions-for-a-bucket"></a>
</h3>
<p>After adding a user to a bucket you may want to change their
permissions - for example, if they had read access only but need admin,
or vice versa. The magic function <code><a href="../reference/six_bucket_change_user.html">six_bucket_change_user()</a></code>
is meant for these kinds of use cases.</p>
<p>First, let’s see what permissions <code>user1</code> has right now
using the previous magic function we learned about:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/six_bucket_permissions.html">six_bucket_permissions</a></span><span class="op">(</span><span class="va">bucket1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span><span class="co">#&gt;   user             permissions policy_read                          policy_admin</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt;       &lt;chr&gt;                                &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 CandiedMeasureme read        S3ReadOnlyAccessBucketyiqxfbrczesdm… &lt;NA&gt;</span></span></code></pre>
<p><code>user1</code> has read access, but we’d like to change that to
write access:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/six_bucket_change_user.html">six_bucket_change_user</a></span><span class="op">(</span></span>
<span>  bucket <span class="op">=</span> <span class="va">bucket1</span>,</span>
<span>  username <span class="op">=</span> <span class="va">user1</span>,</span>
<span>  permissions <span class="op">=</span> <span class="st">"write"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ CandiedMeasureme now has write access to bucket bucket-yiqxfbrczesdmuwo</span></span></code></pre></div>
<p><code><a href="../reference/six_bucket_change_user.html">six_bucket_change_user()</a></code> returns inivisibly. Let’s check
the permissions for this user and bucket after this change:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/six_bucket_permissions.html">six_bucket_permissions</a></span><span class="op">(</span><span class="va">bucket1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span><span class="co">#&gt;   user             permissions policy_write                       policy_admin</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt;       &lt;chr&gt;                              &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 CandiedMeasureme write       S3FullAccessBucketyiqxfbrczesdmuwo &lt;NA&gt;</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="remove-a-user-from-a-bucket">Remove a user from a bucket<a class="anchor" aria-label="anchor" href="#remove-a-user-from-a-bucket"></a>
</h3>
<p>You may at some point want to remove a user from a bucket that you’ve
previously added. The magic function
<code><a href="../reference/six_bucket_remove_user.html">six_bucket_remove_user()</a></code> helps you do just that.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/six_bucket_remove_user.html">six_bucket_remove_user</a></span><span class="op">(</span><span class="va">bucket1</span>, <span class="va">user1</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ CandiedMeasureme access to bucket-yiqxfbrczesdmuwo has been removed</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="delete-a-bucket">Delete a bucket<a class="anchor" aria-label="anchor" href="#delete-a-bucket"></a>
</h3>
<p>Finally, there’s a magic function to make deleting a bucket easier.
For good reason AWS doesn’t allow a bucket to be deleted if it has
obejcts. <code><a href="../reference/six_bucket_delete.html">six_bucket_delete()</a></code> helps you delete a bucket by
cleaning out any objects with prompts. Though, you can force deletion as
well.</p>
<p>First, create a bucket with some objects</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bucket2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/random_string.html">random_bucket</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/aws_bucket_create.html">aws_bucket_create</a></span><span class="op">(</span><span class="va">bucket2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "http://bucket-vgbwzxqafyoudnpc.s3.amazonaws.com/"</span></span>
<span><span class="va">demo_rds_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Meta/demo.rds"</span><span class="op">)</span></span>
<span><span class="va">links_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Meta/links.rds"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/aws_file_upload.html">aws_file_upload</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">demo_rds_file</span>, <span class="va">links_file</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/s3fs/man/path.html" class="external-link">s3_path</a></span><span class="op">(</span><span class="va">bucket2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">demo_rds_file</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">links_file</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "s3://bucket-vgbwzxqafyoudnpc/demo.rds"</span></span>
<span><span class="co">#&gt; [2] "s3://bucket-vgbwzxqafyoudnpc/links.rds"</span></span>
<span><span class="fu"><a href="../reference/aws_bucket_list_objects.html">aws_bucket_list_objects</a></span><span class="op">(</span><span class="va">bucket2</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 8</span></span>
<span><span class="co">#&gt;   bucket         key   uri     size type  etag  lastmodified        storageclass</span></span>
<span><span class="co">#&gt;   &lt;glue&gt;         &lt;chr&gt; &lt;glu&gt; &lt;fs::&gt; &lt;chr&gt; &lt;chr&gt; &lt;dttm&gt;              &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 bucket-vgbwzx… demo… s3:/…    256 file  "\"7… 2025-03-12 22:42:11 STANDARD</span></span>
<span><span class="co">#&gt; 2 bucket-vgbwzx… link… s3:/…  13.2K file  "\"0… 2025-03-12 22:42:11 STANDARD</span></span></code></pre></div>
<p>Then delete the bucket</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/six_bucket_delete.html">six_bucket_delete</a></span><span class="op">(</span><span class="va">bucket2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; ℹ deleting bucket bucket-vgbwzxqafyoudnpc</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="iam-magical-methods">IAM magical methods<a class="anchor" aria-label="anchor" href="#iam-magical-methods"></a>
</h2>
<p>Right now we have magical methods for IAM related to managing user
groups (<code><a href="../reference/six_admin_setup.html">six_admin_setup()</a></code>) and users
(<code>six_user*()</code> functions).</p>
<div class="section level3">
<h3 id="admin-setup">Admin setup<a class="anchor" aria-label="anchor" href="#admin-setup"></a>
</h3>
<p><code><a href="../reference/six_admin_setup.html">six_admin_setup()</a></code> is a helper function for
administrators of AWS accounts. It creates an admin and a user group
with the idea that many administrators are going to want two basic
groups of people associated with their AWS account: users and admins,
where users only have read and maybe write access, while admins have
additional permissions in addition to reading and writing. To these two
groups (users and admins) this function adds a set of five policies each
that give appropriate levels of permissions for each group. You can of
course change the policies, but we think these are a good default set of
policies.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/six_admin_setup.html">six_admin_setup</a></span><span class="op">(</span>users_group <span class="op">=</span> <span class="st">"myusers"</span>, admin_group <span class="op">=</span> <span class="st">"myadmin"</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ whoami: *****</span></span>
<span><span class="co">#&gt; ℹ</span></span>
<span><span class="co">#&gt; ℹ myusers group created - add users to this group that do not require admin permissions</span></span>
<span><span class="co">#&gt; ℹ Added policies to the myusers group: AmazonRDSReadOnlyAccess, AmazonRedshiftReadOnlyAccess, AmazonS3ReadOnlyAccess,</span></span>
<span><span class="co">#&gt; AWSBillingReadOnlyAccess, and IAMReadOnlyAccess</span></span>
<span><span class="co">#&gt; ℹ</span></span>
<span><span class="co">#&gt; ℹ myadmin group created - add users to this group that require admin permissions</span></span>
<span><span class="co">#&gt; ℹ Added policies to the myadmin group: AdministratorAccess, Billing, CostOptimizationHubAdminAccess, AWSBillingReadOnlyAccess, and</span></span>
<span><span class="co">#&gt; AWSCostAndUsageReportAutomationPolicy</span></span>
<span><span class="co">#&gt; ℹ</span></span>
<span><span class="co">#&gt; ℹ Done!</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="user-management">User management<a class="anchor" aria-label="anchor" href="#user-management"></a>
</h3>
<p>There’s currently 3 magic functions for managing users:</p>
<pre><code><span><span class="co">#&gt;  - six_user_create</span></span>
<span><span class="co">#&gt;  - six_user_creds</span></span>
<span><span class="co">#&gt;  - six_user_delete</span></span></code></pre>
<p><code><a href="../reference/six_user_creds.html">six_user_creds()</a></code> is a helper function to create
credentials for an existing users - credentials being an AWS secret
access key and corresponding access key ID. That function is used inside
of <code><a href="../reference/six_user_create.html">six_user_create()</a></code> to create credentials for a new user.
Let’s see how it works. <code><a href="../reference/six_user_create.html">six_user_create()</a></code> will:</p>
<ul>
<li>Create a new user</li>
<li>Add a new <code>UserInfo</code> policy to your account if doesn’t
exist yet</li>
<li>Attach the <code>UserInfo</code> policy to the newly created
user</li>
<li>Grants an access key to the new user, copying an email template to
your clipboard</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">user2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/random_string.html">random_user</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/six_user_create.html">six_user_create</a></span><span class="op">(</span><span class="va">user2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; ℹ Added policy UserInfo to VanillaFries</span></span>
<span><span class="co">#&gt; ✔ Key pair created for VanillaFries</span></span>
<span><span class="co">#&gt; ℹ AccessKeyId: *****</span></span>
<span><span class="co">#&gt; ℹ SecretAccessKey: *****</span></span></code></pre>
<p>It can’t be shown here, but an email template is copied to your
clipboard with the new credentials so you can give them to the person
that is associated with the new user, whether that be via email, chat,
or other means.</p>
<p>You can also delete a user. If a user has any attached policies or
access keys the user can not be deleted. <code><a href="../reference/six_user_delete.html">six_user_delete()</a></code>
does those tasks for you then deletes the user:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/six_user_delete.html">six_user_delete</a></span><span class="op">(</span><span class="va">user2</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ Policy UserInfo detached</span></span>
<span><span class="co">#&gt; ✔ Access Key ID ***** deleted</span></span>
<span><span class="co">#&gt; ℹ VanillaFries deleted</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sean Kross, Scott Chamberlain, Fred Hutchinson Cancer Center.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
